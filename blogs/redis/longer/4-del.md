---
title: 删除策略
---

## 过期数据

我们在之前 [通用命令](../begin.md#时效性相关) 中也讲过数据过期，主要是利用 `ttl` 命令来完成的。  
返回值：  
- `XX`：具有时效性的数据
- `-1`：永久有效的数据
- `-2`：已经过期/被删除/未定义的数据

但实际上过期数据不会立马被删除，只是用不了了，它的删除时机取决于我们定义的删除策略。

## 时效性数据存储结构

一个 hash 的结构  

```yml
expires:
  - value1的地址: 过期时间
  - value2的地址: 过期时间
  - ...
```

我们定义删除策略，在内存占用与CPU占用中寻找平衡，找到合适的时机将其删除。

## 删除策略

### 定时删除

未完待续...